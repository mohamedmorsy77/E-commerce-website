"use strict";(self.webpackChunke_commerce_website=self.webpackChunke_commerce_website||[]).push([[252],{146:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var n=s(5043),c=s(3003),l=s(7638),a=s(492),r=s(6136),o=s(6509),i=s(7034),d=s(2115),u=(s(2342),s(64)),m=s.n(u),h=s(579);const p=function(e){let{product:t,handleDecrease:s,handleIncrease:l,handleConfirmDelete:a}=e;const{updateCartLoadingIds:u}=(0,c.d4)((e=>e.cart)),{deleteCartLoadingIds:m}=(0,c.d4)((e=>e.cart)),p=(0,n.useMemo)((()=>u.includes(t._id)),[t._id,u]),x=(0,n.useMemo)((()=>m.includes(t._id)),[t._id,m]),j=(0,c.wA)();return(0,h.jsxs)("tr",{className:"w-100 border-bottom bg-white rounded-3 ",children:[(0,h.jsxs)("td",{colSpan:"5",className:"d-inline-flex align-items-center gap-2",children:[(0,h.jsx)("img",{className:"cart-image object-fit-contain",src:t.imageCover,alt:"product-image"}),(0,h.jsxs)("div",{className:"cart-info",children:[(0,h.jsx)("p",{className:"m-0 text-success",children:t.title}),(0,h.jsxs)("span",{className:"m-0 d-flex align-items-center gap-2",children:[t.ratingsAverage,(0,h.jsx)(r.A,{className:"w-5 h-5 fs-6 fill-current text-warning ",fill:"currentColor"})]})]})]}),(0,h.jsx)("td",{children:(0,h.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,h.jsx)("button",{onClick:()=>s(t._id,t.count),className:"btn btn-outline-secondary fw-bold btn-sm",children:"-"}),(0,h.jsx)("span",{children:t.count}),(0,h.jsx)("button",{onClick:()=>l(t._id,t.count),className:"btn btn-outline-secondary fw-bold btn-sm",children:"+"})]})}),(0,h.jsxs)("td",{children:["$",t.priceAfterDiscount?t.priceAfterDiscount:t.price]}),(0,h.jsx)("td",{children:(0,h.jsxs)("button",{className:"btn btn-success d-flex align-items-center",onClick:()=>(async e=>{try{const t=await j((0,o.vc)(e)).unwrap();(0,d.oR)(t.message||"Product updated successfully",{position:"top-center"})}catch(t){d.oR.error((null===t||void 0===t?void 0:t.message)||" Something went wrong",{position:"top-center"})}})({productId:t._id,count:t.count}),children:["Update ",p&&(0,h.jsx)(i.A,{color:"#69ca46",size:5})]})}),(0,h.jsx)("td",{children:(0,h.jsxs)("button",{className:"btn btn-danger",onClick:()=>{return e=t._id,void a((async()=>{try{const t=await j((0,o.DD)(e)).unwrap();(0,d.oR)((null===t||void 0===t?void 0:t.message)||"Product deleted successfully",{position:"top-center"})}catch(t){d.oR.error((null===t||void 0===t?void 0:t.message)||" Something went wrong",{position:"top-center"})}}));var e},children:["Delete ",x&&(0,h.jsx)(i.A,{color:"#69ca46",size:5})]})})]},t._id)};var x=s(1675);const j=function(){const e=(0,x.Zp)(),t=(0,c.d4)((e=>{var t;return(null===(t=e.cart.cartInfo)||void 0===t?void 0:t.numOfCartItems)||0})),s=(0,c.d4)((e=>{var t,s;return(null===(t=e.cart.cartInfo)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.totalCartPrice)||0})),n=(0,c.d4)(l.Dt.selectAll),r=(0,c.d4)(a.Rt.selectAll),i=(0,c.wA)(),u=r.map((e=>{const t=n.find((t=>(null===t||void 0===t?void 0:t._id)===e.product));return{...e,...t}})),j=(e,t)=>{i((0,a.OX)({productId:e,newCount:t+1}))},w=(e,t)=>{t>1&&i((0,a.OX)({productId:e,newCount:t-1}))},b=async e=>{(await m().fire({title:"Confirm Deletion",text:"Are you sure you want to delete?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed&&e()};return(0,h.jsxs)("section",{className:"cart p-5 mt-all",children:[(0,h.jsx)(d.N9,{}),(0,h.jsx)("div",{className:"container",children:(0,h.jsxs)("div",{className:"row",children:[(0,h.jsxs)("div",{className:"col-12 col-lg-8 mt-4",children:[(0,h.jsx)("div",{className:"row  rounded-2 shadow-sm p-2",children:(0,h.jsxs)("div",{className:"col-12 d-flex text-md-start justify-content-between align-items-center gap-3 flex-wrap",children:[(0,h.jsxs)("h3",{children:["Cart"," ",(0,h.jsx)("span",{className:"text-secondary fs-5",children:t>0?`(${t} Items in cart)`:"Your Cart is Empty"})]}),(0,h.jsx)("button",{className:"btn btn-danger   fw-bold fs-6",onClick:()=>{b((async()=>{try{await i((0,o.uA)()).unwrap();(0,d.oR)("All products have been deleted",{position:"top-center"})}catch(e){d.oR.error((null===e||void 0===e?void 0:e.message)||" Something went wrong",{position:"top-center"})}}))},children:"x clear cart"})]})}),(0,h.jsx)("div",{className:"row mt-3 rounded-2   table-responsive",children:u.length>0?(0,h.jsxs)("table",{className:"table",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"fw-bold p-2",children:"Product"}),(0,h.jsx)("th",{className:"fw-bold p-2",children:"count"}),(0,h.jsx)("th",{className:"fw-bold p-2",children:"price"}),(0,h.jsx)("th",{className:"fw-bold p-2",children:"Update"}),(0,h.jsx)("th",{className:"fw-bold p-2",children:"Delete"})]})}),(0,h.jsx)("tbody",{children:u&&u.map((e=>(0,h.jsx)(p,{product:e,handleIncrease:j,handleDecrease:w,handleConfirmDelete:b},e._id)))})]}):(0,h.jsx)("p",{className:"fs-1 fw-medium text-bg-light p-4 text-center",children:"Your Cart Is Empty"})})]}),(0,h.jsx)("div",{className:"col-12 col-lg-4 mt-4",children:(0,h.jsxs)("div",{className:"summary p-3 rounded-2  shadow",children:[(0,h.jsxs)("h4",{children:["Total Price: $",s]}),(0,h.jsx)("button",{disabled:0===t,className:"btn btn-dark mt-3 w-100 fw-bold",onClick:()=>e("/checkout"),children:"Continue to checkout"})]})})]})})]})}}}]);
//# sourceMappingURL=252.39f724be.chunk.js.map